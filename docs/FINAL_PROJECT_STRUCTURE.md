# üìê Estrutura Final do Projeto - Agentes de Convers√£o

Este documento consolida a arquitetura completa de dom√≠nios, rotas do frontend (Next.js) e endpoints da API (FastAPI) planejada para a plataforma **Agentes de Convers√£o**. O objetivo √© servir como refer√™ncia √∫nica para a implementa√ß√£o.

## 1. Dom√≠nios e Subdom√≠nios

- **Dom√≠nio principal:** `agentesdeconversao.ai` ‚Üí redireciona para `lp.agentesdeconversao.ai`
- **Subdom√≠nios:**
  - `lp.agentesdeconversao.ai` ‚Äì Landing Page
  - `dash.agentesdeconversao.ai` ‚Äì Dashboard principal
  - `docs.agentesdeconversao.ai` ‚Äì Documenta√ß√£o
  - `login.agentesdeconversao.ai` ‚Äì Autentica√ß√£o
  - `api.agentesdeconversao.ai` ‚Äì Backend API
  - `chat.agentesdeconversao.ai` ‚Äì Widget de chat (embeddable)

## 2. Rotas do Frontend (Next.js App Router)

### 2.1 P√∫blicas
```ts
/                    // Home da landing page
/sobre               // Sobre a empresa
/precos              // Planos e pre√ßos
/recursos            // Features detalhadas
/casos-de-uso        // Cases de sucesso
/blog                // Blog
/blog/[slug]         // Post individual
/contato             // Formul√°rio de contato
/privacidade         // Pol√≠tica de privacidade
/termos              // Termos de uso
```

### Autentica√ß√£o (`login.agentesdeconversao.ai`)
```ts
/                 // Login principal
/signup           // Criar conta
/forgot-password  // Recuperar senha
/reset-password   // Resetar senha com token
/verify-email     // Verificar email
/magic-link       // Login via link m√°gico
```

### 2.2 Protegidas ‚Äì Dashboard (`dash.agentesdeconversao.ai`)
```ts
/                    // Vis√£o geral
/onboarding          // Wizard de primeiro acesso
/profile             // Perfil do usu√°rio
/settings            // Configura√ß√µes da conta
/billing             // Faturamento e assinatura
/api-keys            // Tokens de API

/agents              // Lista de agentes
/agents/new          // Criar agente
/agents/[id]         // Detalhes
/agents/[id]/edit    // Editar agente
/agents/[id]/analytics // Analytics
/agents/[id]/test    // Testar agente

/agent-studio              // Lista de fluxos
/agent-studio/new          // Novo fluxo
/agent-studio/[agentId]    // Editor principal
/agent-studio/[agentId]/flow      // Editor visual
/agent-studio/[agentId]/prompts   // Prompts
/agent-studio/[agentId]/tools     // Ferramentas
/agent-studio/[agentId]/training  // Treinamento
/agent-studio/[agentId]/simulate  // Simulador
/agent-studio/templates     // Galeria de templates

/conversations              // Conversas
/conversations/[id]         // Conversa espec√≠fica
/conversations/[id]/transcript // Transcri√ß√£o
/monitoring                 // Monitoramento
/analytics                  // Dashboard de analytics
/knowledge                  // Base de conhecimento
/integrations               // Integra√ß√µes
/team                       // Time e colabora√ß√£o
```

### 2.3 Administrativas
```ts
/admin                // Dashboard admin
/admin/users          // Gerenciar usu√°rios
/admin/organizations  // Organiza√ß√µes
/admin/agents         // Todos os agentes
/admin/conversations  // Todas as conversas
/admin/api-status     // Status das APIs
/admin/api-keys       // Chaves globais
/admin/config-check   // Verifica√ß√£o de sistema
/admin/logs           // Logs
/admin/metrics        // M√©tricas
/admin/billing        // Faturamento geral
/admin/subdomains     // Subdom√≠nios
/admin/maintenance    // Modo manuten√ß√£o
```

## 3. Endpoints da API (FastAPI)

A API √© exposta em `api.agentesdeconversao.ai`.

### 3.1 P√∫blicos
```http
GET  /              # Info e status
GET  /health        # Health check
GET  /status        # Status detalhado
POST /webhooks/{provider}  # Webhooks de entrada

POST /auth/signup
POST /auth/login
POST /auth/logout
POST /auth/refresh
POST /auth/forgot-password
POST /auth/reset-password
POST /auth/verify-email
GET  /auth/me
```

### 3.2 Agentes
```http
GET    /agents                 # Listar agentes
POST   /agents                 # Criar
GET    /agents/:id             # Detalhes
PUT    /agents/:id             # Atualizar
DELETE /agents/:id             # Remover
POST   /agents/:id/duplicate   # Duplicar
GET    /agents/:id/config      # Config completo
PUT    /agents/:id/config      # Atualizar config
POST   /agents/:id/test        # Testar
GET    /agents/:id/logs        # Logs
GET    /agents/:id/analytics   # Analytics
GET    /agents/:id/metrics     # M√©tricas
GET    /agents/:id/performance # Performance
```

### 3.3 Conversas
```http
GET    /conversations                   # Listar
POST   /conversations                   # Iniciar
GET    /conversations/:id               # Detalhes
PUT    /conversations/:id               # Atualizar
DELETE /conversations/:id               # Deletar
POST   /conversations/:id/archive       # Arquivar
POST   /conversations/:id/unarchive     # Desarquivar

GET    /conversations/:id/messages      # Mensagens
POST   /conversations/:id/messages      # Enviar
PUT    /conversations/:id/messages/:msgId  # Editar
DELETE /conversations/:id/messages/:msgId  # Remover

POST   /conversations/:id/assign        # Atribuir humano
POST   /conversations/:id/transfer      # Transferir
POST   /conversations/:id/close         # Fechar
POST   /conversations/:id/reopen        # Reabrir
POST   /conversations/:id/rate          # Avaliar
```

### 3.4 Conhecimento
```http
GET    /knowledge/documents             # Listar docs
POST   /knowledge/documents/upload      # Upload
GET    /knowledge/documents/:id         # Detalhes
DELETE /knowledge/documents/:id         # Remover
POST   /knowledge/documents/:id/process # Reprocessar

GET    /knowledge/sources               # Fontes
POST   /knowledge/sources               # Adicionar
PUT    /knowledge/sources/:id           # Atualizar
DELETE /knowledge/sources/:id           # Remover
POST   /knowledge/sources/:id/sync      # Sincronizar

GET    /knowledge/mcp                   # Conectores MCP
POST   /knowledge/mcp/:type/connect     # Conectar
GET    /knowledge/mcp/:id/status        # Status
PUT    /knowledge/mcp/:id/config        # Configurar
DELETE /knowledge/mcp/:id               # Desconectar
POST   /knowledge/mcp/:id/test          # Testar
```

### 3.5 AgentStudio
```http
GET    /flows                      # Listar fluxos
POST   /flows                      # Criar
GET    /flows/:id                  # Detalhes
PUT    /flows/:id                  # Atualizar
DELETE /flows/:id                  # Deletar
POST   /flows/:id/publish          # Publicar
POST   /flows/:id/draft            # Salvar rascunho
GET    /flows/:id/versions         # Hist√≥rico
POST   /flows/:id/rollback/:version  # Reverter

GET    /flows/templates            # Templates
GET    /flows/templates/:category  # Por categoria
POST   /flows/templates/:id/use    # Usar template
```

### 3.6 Analytics
```http
GET /analytics/overview         # Overview
GET /analytics/real-time        # Dados em tempo real
GET /analytics/historical       # Dados hist√≥ricos
GET /analytics/conversations    # Por conversa
GET /analytics/agents           # Por agente
GET /analytics/users            # Por usu√°rio
GET /analytics/conversion       # Funil
GET /analytics/satisfaction     # Satisfa√ß√£o
GET /analytics/trends           # Tend√™ncias
POST /analytics/reports/generate  # Gerar relat√≥rio
GET  /analytics/reports/:id       # Baixar
GET  /analytics/reports           # Listar
```

### 3.7 Integra√ß√µes
```http
POST   /integrations/whatsapp/qr      # Gerar QR
POST   /integrations/whatsapp/verify  # Verificar
GET    /integrations/whatsapp/status  # Status
POST   /integrations/whatsapp/send    # Enviar
POST   /integrations/whatsapp/webhook # Webhook

GET    /integrations/webhooks         # Listar webhooks
POST   /integrations/webhooks         # Criar
PUT    /integrations/webhooks/:id     # Atualizar
DELETE /integrations/webhooks/:id     # Deletar
POST   /integrations/webhooks/:id/test # Testar
```

### 3.8 Admin
```http
GET  /admin/users            # Todos usu√°rios
GET  /admin/organizations    # Todas as organiza√ß√µes
GET  /admin/metrics          # M√©tricas do sistema
POST /admin/broadcast        # Comunicado
PUT  /admin/config           # Configura√ß√£o global
POST /admin/maintenance      # Modo manuten√ß√£o
GET  /admin/logs             # Logs
POST /admin/cache/clear      # Limpar cache
```

## 4. Widgets e Embeds
```ts
/widget/:agentId           // Widget de chat
/widget/:agentId/bubble    // Vers√£o bubble
/widget/:agentId/fullscreen // Tela cheia
/widget/:agentId/inline    // Inline

/embed/js/:agentId         // JavaScript do widget
/embed/css/:agentId        // CSS customizado
```

## 5. Documenta√ß√£o (`docs.agentesdeconversao.ai`)
```ts
/                      // Home
/quickstart            // Guia r√°pido
/tutorials             // Tutoriais
/tutorials/[slug]      // Tutorial espec√≠fico
/api-reference         // Refer√™ncia da API
/api-reference/[endpoint] // Endpoint espec√≠fico
/sdks                  // SDKs
/sdks/[language]       // SDK espec√≠fico
/guides                // Guias avan√ßados
/guides/[topic]        // Guia espec√≠fico
/changelog             // Hist√≥rico
/support               // Suporte
```

## 6. Rotas Especiais
```ts
/404            // P√°gina n√£o encontrada
/500            // Erro do servidor
/maintenance    // Modo manuten√ß√£o

/privacy        // Pol√≠tica de privacidade
/terms          // Termos de servi√ßo
/cookies        // Pol√≠tica de cookies
/gdpr           // GDPR compliance
/security       // Seguran√ßa

/affiliate      // Programa de afiliados
/partners       // Parceiros
/press          // Imprensa
/careers        // Carreiras
```

## 7. Estrutura de Pastas Next.js (App Router)
```ts
app/
‚îú‚îÄ‚îÄ (public)/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ sobre/page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ precos/page.tsx
‚îÇ   ‚îî‚îÄ‚îÄ contato/page.tsx
‚îú‚îÄ‚îÄ (auth)/
‚îÇ   ‚îú‚îÄ‚îÄ login/page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ signup/page.tsx
‚îÇ   ‚îî‚îÄ‚îÄ forgot-password/page.tsx
‚îú‚îÄ‚îÄ (dashboard)/
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ new/page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ edit/page.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ analytics/page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ conversations/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ agent-studio/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [agentId]/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ flow/page.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ prompts/page.tsx
‚îÇ   ‚îî‚îÄ‚îÄ analytics/
‚îÇ       ‚îú‚îÄ‚îÄ page.tsx
‚îÇ       ‚îî‚îÄ‚îÄ [type]/page.tsx
‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îî‚îÄ‚îÄ [...admin pages]
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ [...endpoints]
```

---

Este guia resume a organiza√ß√£o pretendida para todo o ecossistema **Agentes de Convers√£o**, servindo como refer√™ncia para desenvolvimento e futuras auditorias.
